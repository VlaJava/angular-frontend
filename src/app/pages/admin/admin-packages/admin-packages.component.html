<div class="header">
  <h1>Gerenciar Pacotes</h1>
  <!-- Chama o método para adicionar -->
  <button class="btn-primary" (click)="openAddModal()">Adicionar Pacote</button>
</div>

<div class="table-container">
  <div *ngIf="isLoading" class="loading-indicator">
    Carregando pacotes...
  </div>

  <table *ngIf="!isLoading && packages.length > 0">
    <thead>
      <tr>
        <th>Título</th>
        <th>Destino</th>
        <th>Valor</th>
        <th>Disponível</th>
        <th class="text-center">Ações</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let pkg of packages">
        <td>{{ pkg.title }}</td>
        <td>{{ pkg.destination }}</td>
        <td>{{ pkg.price | currency:'BRL' }}</td>
        <td>{{ pkg.available ? 'Sim' : 'Não' }}</td>
        <td class="actions text-center">
          <!-- Chama o método para editar, passando o pacote (pkg) -->
          <a (click)="openEditModal(pkg)" class="edit-link">Editar</a>
          <a (click)="handleDeletePackage(pkg.id!)" class="delete-link">Excluir</a>
        </td>
      </tr>
    </tbody>
  </table>

  <div *ngIf="!isLoading && packages.length === 0" class="empty-state">
    Nenhum pacote encontrado. Adicione um novo!
  </div>
</div>

<!-- O Modal agora recebe o pacote a ser editado e emite um evento quando fecha -->
<app-package-modal 
  *ngIf="isModalOpen" 
  [packageToEdit]="selectedPackageForEdit"
  (close)="handleModalClose($event)">
</app-package-modal>
