<section class="search-section container">
  <div class="search-wrapper p-4 rounded-3">
    <div class="row g-3 align-items-end">

      <div class="col-lg-4 col-md-12">
        <label class="form-label text-white fw-bold">Trajeto</label>
        <div class="input-card">
          <input type="text"
                 class="form-control"
                 placeholder="Origem"
                 [(ngModel)]="filterOrigin"
                 (ngModelChange)="onSearch()">
          <div class="divider-vertical"></div>
          <input type="text"
                 class="form-control"
                 placeholder="Destino"
                 [(ngModel)]="filterDestination"
                 (ngModelChange)="onSearch()">
        </div>
      </div>

      <div class="col-lg-4 col-md-6">
        <label class="form-label text-white fw-bold">Data</label>
        <div class="input-card">
          <input type="date"
                 class="form-control text-center"
                 placeholder="Ida"
                 [min]="todayDate"
                 [(ngModel)]="filterStartDate"
                 (ngModelChange)="onSearch()">
          <div class="divider-vertical"></div>
          <input type="date"
                 class="form-control text-center"
                 placeholder="Volta"
                 [min]="filterStartDate || todayDate"
                 [(ngModel)]="filterEndDate"
                 (ngModelChange)="onSearch()">
        </div>
      </div>

      <div class="col-lg-4 col-md-6">
        <label class="form-label text-white fw-bold">Orçamento</label>
        <div class="input-card px-4">
          <span class="text-nowrap me-3">{{ formattedBudget }}</span>
          <input type="range"
                 class="form-range"
                 [min]="minBudget"
                 [max]="maxBudget"
                 [(ngModel)]="budgetValue"
                 (ngModelChange)="onBudgetChange()">
        </div>
      </div>

    </div>
  </div>
</section>



<div class="container my-5">
  
  <div class="text-center py-5" *ngIf="isLoading">
    <div class="spinner-border text-primary" role="status">
      <span class="visually-hidden">Loading...</span>
    </div>
    <p class="mt-2 text-muted">Buscando os melhores pacotes...</p>
  </div>

  
  <div *ngIf="!isLoading">
    <div *ngIf="packages.length > 0; else noPackages">
      <p class="text-muted mb-4">{{ totalItems }} pacotes encontrados.</p>
      <div class="packages-list">
        <app-package-list-item *ngFor="let pkg of packages" [pacote]="pkg"></app-package-list-item>
      </div>

 
      <div class="d-flex justify-content-center mt-5" *ngIf="totalPages > 1">
        <nav>
          <ul class="pagination">
            <li class="page-item" [class.disabled]="currentPage === 0">
              <a class="page-link" href="javascript:void(0)" (click)="onPageChange(currentPage - 1)">&laquo;</a>
            </li>
            <li class="page-item" *ngFor="let page of pages" [class.active]="currentPage === page">
              <a class="page-link" href="javascript:void(0)" (click)="onPageChange(page)">{{ page + 1 }}</a>
            </li>
            <li class="page-item" [class.disabled]="currentPage >= totalPages - 1">
              <a class="page-link" href="javascript:void(0)" (click)="onPageChange(currentPage + 1)">&raquo;</a>
            </li>
          </ul>
        </nav>
      </div>
    </div>

    
    <ng-template #noPackages>
      <div class="text-center py-5 empty-state">
          <i class="bi bi-emoji-frown fs-1 text-muted"></i>
          <h4 class="mt-3">Nenhum pacote encontrado</h4>
          <p class="text-muted">Tente alterar os filtros para encontrar mais opções.</p>
      </div>
    </ng-template>
  </div>
</div>
